<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sakazaki_tu's Portfolio - sakazaki_tuのポートフォリオ</title>
    <meta name="description" content="sakazaki_tuのポートフォリオサイト。これまでのプロジェクト実績やスキルを紹介しています。">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            scroll-behavior: smooth;
            transition: background-color 0.3s, color 0.3s;
        }
        /* Dark mode styles */
        .dark body {
            background-color: #1f2937; /* gray-800 */
            color: #f3f4f6; /* gray-100 */
        }
        .dark .bg-white { background-color: #374151 !important; /* gray-700 */ }
        .dark .bg-gray-50 { background-color: #4b5563 !important; /* gray-600 */ }
        .dark .bg-gray-100 { background-color: #1f2937 !important; /* gray-800 */ }
        .dark .text-gray-800 { color: #f3f4f6 !important; /* gray-100 */ }
        .dark .text-gray-700 { color: #d1d5db !important; /* gray-300 */ }
        .dark .text-gray-600 { color: #9ca3af !important; /* gray-400 */ }
        .dark .skill-card-item span[data-translate="skillsExperienceLevel"] {
            color: #e5e7eb !important;
        }
        .dark .text-sky-600 { color: #38bdf8 !important; /* sky-400 */ }
        .dark .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0,0,0,0.3), 0 4px 6px -2px rgba(0,0,0,0.25); }
        .dark .card {
             @apply bg-gray-700 shadow-gray-900/50;
        }
        .dark .lang-btn:not(.active) {
            @apply bg-gray-600 text-gray-200;
        }
        .dark #project-modal .modal-content {
            background-color: #374151 !important;
            color: #f3f4f6 !important;
        }
        .dark #project-modal .modal-content .prose,
        .dark #project-modal .modal-content .prose p,
        .dark #project-modal .modal-content .prose strong,
        .dark #project-modal .modal-content .prose h3,
        .dark #project-modal .modal-content .prose h4,
        .dark #project-modal .modal-content .prose li {
             color: #f3f4f6 !important;
        }
        .dark #project-modal .modal-content .tech-details-text {
            color: #d1d5db !important;
        }
        .dark .timeline-item .timeline-content {
            @apply bg-gray-700;
        }
        .dark .timeline-item .timeline-icon-container::before {
            @apply border-gray-700;
        }
        .dark .timeline-line-container::after {
            @apply bg-gray-600;
        }
        .dark .progress-bar-bg {
            background-color: #4b5563 !important;
        }
        .dark .achievement-toast {
            @apply bg-gray-700 text-white border-gray-600;
        }
        .dark #hero-canvas {
            background-color: #060910;
        }
        .dark #mobile-menu {
            @apply bg-sky-800;
        }


        .section-title {
            @apply text-3xl font-bold mb-12 text-center;
        }
        .card {
            @apply bg-white rounded-xl shadow-lg overflow-hidden transition-all duration-300 ease-in-out;
        }

        .skill-card-item {
            @apply flex items-center space-x-2 transition-transform duration-200 ease-in-out;
        }


        #project-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
            justify-content: center;
            align-items: center;
            z-index: 200;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            padding: 1rem;
        }
        .modal-content {
            background-color: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            max-width: 42rem;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            display: block;
        }
        #modal-body {
            min-height: 50px;
        }
        #project-modal .modal-content .tech-details-heading {
            color: #1f2937;
            font-weight: 600;
        }
        #project-modal .modal-content .tech-details-text {
            color: #374151;
        }
        #modal-body.prose h3 { margin-top: 0; }


        .lang-btn {
            @apply px-2 py-1 sm:px-3 sm:py-1 rounded-md text-xs font-medium transition-colors duration-200 ease-in-out;
        }
        .lang-btn.active {
            @apply bg-sky-500 text-white;
        }
        .lang-btn:not(.active) {
            @apply bg-gray-200 text-gray-700;
        }
        .theme-btn {
            @apply p-1 sm:p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-400 transition-colors duration-200 ease-in-out;
        }
        .nav-link {
            transition: color 0.2s ease-in-out;
            @apply text-xs sm:text-sm;
        }

        .cta-button {
            @apply bg-white text-sky-600 font-semibold px-8 py-3 rounded-lg shadow-md transition-all duration-300 transform dark:text-white dark:bg-sky-600 text-lg;
        }
        .project-details-button {
            @apply bg-sky-600 text-white px-6 py-2 rounded-lg transition-colors duration-200 ease-in-out w-full sm:w-auto;
        }

        .fade-in-section {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .typing-cursor {
            display: inline-block;
            width: 2px;
            height: 1.2em;
            background-color: currentColor;
            animation: blink 0.7s infinite;
            margin-left: 2px;
            vertical-align: bottom;
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        .progress-bar-bg {
            width: 100%;
            background-color: #e5e7eb;
            border-radius: 9999px;
            height: 0.625rem;
        }
        .progress-bar-fill {
            background-color: #0ea5e9;
            height: 0.625rem;
            border-radius: 9999px;
            width: 0%;
            transition: width 1s ease-out !important;
        }
        .progress-bar-label { @apply text-xs text-gray-500 dark:text-gray-400; }

        .achievement-toast {
            @apply fixed bottom-5 right-5 bg-white dark:bg-gray-700 text-gray-800 dark:text-white p-4 rounded-lg shadow-xl border border-gray-200 dark:border-gray-600 z-[150] transition-all duration-500 ease-in-out transform translate-x-full opacity-0;
        }
        .achievement-toast.show {
            @apply translate-x-0 opacity-100;
        }
        .achievement-toast-icon { @apply w-8 h-8 mr-3 text-yellow-400; }

        .timeline { @apply relative max-w-2xl mx-auto; }
        .timeline-item {
            @apply mb-8 flex items-start relative;
             padding-left: 2.5rem;
        }
        .timeline-icon-container {
            @apply absolute left-0 top-0 flex-shrink-0 w-10 h-10 flex items-center justify-center;
        }
        .timeline-icon-container::before {
            content: '';
            @apply absolute w-4 h-4 bg-sky-500 rounded-full border-4 border-white dark:border-gray-700;
            top: 0.375rem;
            left: 0.375rem;
        }
        .timeline-icon-container i[data-lucide] {
            @apply relative z-10 text-white;
             width: 1rem;
             height: 1rem;
        }
        .timeline-item:not(:last-child)::after {
            content: '';
            @apply absolute w-0.5 bg-gray-300 dark:bg-gray-600;
            left: calc(1.25rem - 1px);
            top: 2.5rem;
            bottom: -1rem;
        }

        .timeline-content-wrapper {
            @apply flex-grow;
        }
        .timeline-date { @apply text-sm text-gray-500 dark:text-gray-400 mb-1; }
        .timeline-title { @apply text-lg font-semibold text-sky-600 dark:text-sky-400 mb-1; }
        .timeline-content {
            @apply bg-gray-50 dark:bg-gray-700 p-4 rounded-lg shadow-md transition-all duration-300;
        }
        .timeline-description { @apply text-sm; }

        #hero-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background-color: #0A0F1A;
        }
        #hero .container {
            position: relative;
            z-index: 1;
        }
        #mobile-menu {
            @apply absolute top-full left-0 right-0 bg-sky-700 p-4 shadow-lg z-40;
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
            transform: translateY(-100%);
            opacity: 0;
            pointer-events: none;
        }
        #mobile-menu.open {
            transform: translateY(0);
            opacity: 1;
            pointer-events: auto;
        }
        #mobile-menu a {
            @apply block text-white py-2 px-3 rounded-md hover:bg-sky-600 transition-colors;
        }

    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <header class="bg-sky-700 text-white p-3 sm:p-4 fixed w-full z-50 shadow-md">
        <div class="container mx-auto flex justify-between items-center">
            <a href="#hero" class="text-lg sm:text-xl font-bold transition-colors" data-translate="portfolioTitle">sakazaki_tuのポートフォリオ</a>
            <nav class="hidden sm:flex items-center space-x-1 sm:space-x-2">
                <a href="#hero" class="nav-link" data-translate="navHome">ホーム</a>
                <a href="#about" class="nav-link" data-translate="navAbout">自己紹介</a>
                <a href="#career" class="nav-link" data-translate="navCareer">キャリア</a>
                <a href="#vision" class="nav-link" data-translate="navVision">ビジョン</a>
                <a href="#skills" class="nav-link" data-translate="navSkills">スキル</a>
                <a href="#projects" class="nav-link" data-translate="navProjects">実績</a>
                <a href="#contact" class="nav-link" data-translate="navContact">連絡先</a>
                <div class="flex space-x-1 border-l border-sky-600 pl-1 sm:pl-2">
                    <button id="lang-ja" class="lang-btn active">JP</button>
                    <button id="lang-en" class="lang-btn">EN</button>
                </div>
                <button id="theme-toggle-btn" class="theme-btn">
                    <i data-lucide="sun" class="block dark:hidden w-4 h-4 sm:w-5 sm:h-5"></i>
                    <i data-lucide="moon" class="hidden dark:block w-4 h-4 sm:w-5 sm:h-5"></i>
                </button>
            </nav>
            <div class="sm:hidden flex items-center">
                 <div class="flex space-x-1 mr-2"> <button id="lang-ja-mobile" class="lang-btn active">JP</button>
                    <button id="lang-en-mobile" class="lang-btn">EN</button>
                </div>
                <button id="theme-toggle-btn-mobile" class="theme-btn mr-2">
                     <i data-lucide="sun" class="block dark:hidden w-5 h-5"></i>
                     <i data-lucide="moon" class="hidden dark:block w-5 h-5"></i>
                </button>
                <button id="menu-toggle-btn" class="p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden">
            <a href="#hero" class="nav-link mobile-nav-link" data-translate="navHome">ホーム</a>
            <a href="#about" class="nav-link mobile-nav-link" data-translate="navAbout">自己紹介</a>
            <a href="#career" class="nav-link mobile-nav-link" data-translate="navCareer">キャリア</a>
            <a href="#vision" class="nav-link mobile-nav-link" data-translate="navVision">ビジョン</a>
            <a href="#skills" class="nav-link mobile-nav-link" data-translate="navSkills">スキル</a>
            <a href="#projects" class="nav-link mobile-nav-link" data-translate="navProjects">実績</a>
            <a href="#contact" class="nav-link mobile-nav-link" data-translate="navContact">連絡先</a>
        </div>
    </header>

    <section id="hero" class="relative pt-20 pb-12 sm:pt-32 sm:pb-24 text-white text-center fade-in-section overflow-hidden">
        <canvas id="hero-canvas"></canvas>
        <div class="container mx-auto px-4">
            <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-4" data-translate="heroTitle">sakazaki_tuのエンジニアポートフォリオ</h2>
            <p class="text-lg sm:text-xl md:text-2xl mb-8 min-h-[1.5em] sm:min-h-[2.5em]">
                <span id="hero-subtitle-text" data-translate="heroSubtitle">フルスタック開発者として10年以上走った軌跡</span>
                <span class="typing-cursor"></span>
            </p>
            <a href="#projects" class="cta-button" data-translate="heroCta">プロジェクトを見る</a>
        </div>
    </section>

    <section id="about" class="py-16 sm:py-20 bg-white fade-in-section">
        <div class="container mx-auto px-4">
            <h2 class="section-title" data-translate="aboutTitle">自己紹介</h2>
            <div class="max-w-3xl mx-auto text-center">
                <img src="profile.png" alt="sakazaki_tuの写真" class="w-32 h-32 sm:w-40 sm:h-40 rounded-full mx-auto mb-6 shadow-lg border-4 border-sky-200 dark:border-sky-500">
                <p class="text-lg mb-4" data-translate="aboutIntro">
                    はじめまして。sakazaki_tuです。2013年よりSES会社にて、主に国家業務案件やホームセンター業務のシステム開発・運用保守に携わってまいりました。
                    詳細設計からテスト、運用保守、さらにはチームリーダーとしてメンバーのマネジメントまで、幅広い経験を積んでおります。
                    常に新しい技術や知識を積極的に取り入れ、チーム全体のパフォーマンス向上とプロジェクトの成功に貢献することに情熱を燃やしています。
                </p>
            </div>
        </div>
    </section>

    <section id="career" class="py-16 sm:py-20 bg-gray-50 fade-in-section">
        <div class="container mx-auto px-4">
            <h2 class="section-title" data-translate="careerTitle">キャリアジャーニー</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-icon-container">
                        <i data-lucide="briefcase"></i>
                    </div>
                    <div class="timeline-content-wrapper">
                        <div class="timeline-date" data-translate="career1Date">2013年04月</div>
                        <div class="timeline-content">
                            <h3 class="timeline-title" data-translate="career1Title">SES会社 入社</h3>
                            <p class="timeline-description" data-translate="career1Desc">正社員としてキャリアをスタート。</p>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-icon-container">
                        <i data-lucide="shield-check"></i>
                    </div>
                    <div class="timeline-content-wrapper">
                        <div class="timeline-date" data-translate="career2Date">2015年03月</div>
                        <div class="timeline-content">
                            <h3 class="timeline-title" data-translate="career2Title">国家業務案件 プロジェクト参画</h3>
                            <p class="timeline-description" data-translate="career2Desc">詳細設計工程からメンバーとして参画。バッチ機能開発、テスト、障害対応を担当。</p>
                        </div>
                    </div>
                </div>
                 <div class="timeline-item">
                    <div class="timeline-icon-container">
                        <i data-lucide="user-cog"></i>
                    </div>
                    <div class="timeline-content-wrapper">
                        <div class="timeline-date" data-translate="career3Date">2019年04月</div>
                        <div class="timeline-content">
                            <h3 class="timeline-title" data-translate="career3Title">チームリーダー就任 (国家業務案件)</h3>
                            <p class="timeline-description" data-translate="career3Desc">運用保守、機能改善、制度改正対応などで開発チームリーダーを担当。環境準備、メンバー指導、進捗管理等を実施。</p>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-icon-container">
                        <i data-lucide="home"></i>
                    </div>
                    <div class="timeline-content-wrapper">
                        <div class="timeline-date" data-translate="career4Date">2024年03月</div>
                        <div class="timeline-content">
                            <h3 class="timeline-title" data-translate="career4Title">ホームセンター業務運用システム開発 プロジェクト参画</h3>
                            <p class="timeline-description" data-translate="career4Desc">チームリーダーとして参画。メンバーマネジメントと開発作業を兼務。</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="vision" class="py-16 sm:py-20 bg-white fade-in-section">
        <div class="container mx-auto px-4">
            <h2 class="section-title" data-translate="visionTitle">今後のビジョン</h2>
            <div class="max-w-3xl mx-auto text-center">
                 <i data-lucide="trending-up" class="w-16 h-16 mx-auto mb-6 text-sky-500"></i>
                <p class="text-lg mb-4" data-translate="visionText1">
                    これまでのシステム開発とチームリーダーとしての経験を基盤に、より大規模で社会貢献性の高いプロジェクトに挑戦していきたいと考えています。
                    特に、クラウドネイティブなアーキテクチャ設計や、AI・機械学習技術を活用した新しい価値創造に強い関心を持っています。
                </p>
                <p class="text-lg" data-translate="visionText2">
                    技術的な専門性を深めるとともに、プロジェクト全体を俯瞰し、ビジネスゴール達成に貢献できるアーキテクトまたはプロダクトマネージャーとしてのキャリアパスも視野に入れています。
                    変化の速いIT業界において、常に学び続け、新しい技術や方法論を柔軟に取り入れながら、チームと共に成長していける環境を求めています。
                </p>
            </div>
        </div>
    </section>

    <section id="skills" class="py-16 sm:py-20 bg-gray-50 fade-in-section">
        <div class="container mx-auto px-4">
            <h2 class="section-title" data-translate="skillsTitle">スキルセット</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="card p-6">
                    <h3 class="text-xl font-semibold mb-4 text-sky-600 flex items-center"><i data-lucide="monitor" class="mr-2"></i><span data-translate="skillsOs">OS</span></h3>
                    <ul class="space-y-3">
                        <li class="skill-card-item">Windows 10/11: <span data-translate="skillsExperienceLevel" class="text-gray-500 ml-auto"></span></li>
                    </ul>
                </div>
                <div class="card p-6">
                    <h3 class="text-xl font-semibold mb-4 text-sky-600 flex items-center"><i data-lucide="code-2" class="mr-2"></i><span data-translate="skillsLanguages">言語</span></h3>
                    <ul class="space-y-4">
                        <li>
                            <div class="flex justify-between items-center mb-1">
                                <span class="skill-card-item">Java:</span>
                                <span class="progress-bar-label" data-translate="skillsExperience12">12年</span>
                            </div>
                            <div class="progress-bar-bg"><div class="progress-bar-fill" data-skill-level="95"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-center mb-1">
                                <span class="skill-card-item">PL/SQL:</span>
                                <span class="progress-bar-label" data-translate="skillsExperience12">12年</span>
                            </div>
                            <div class="progress-bar-bg"><div class="progress-bar-fill" data-skill-level="90"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-center mb-1">
                                <span class="skill-card-item">HTML/CSS:</span>
                                <span class="progress-bar-label" data-translate="skillsExperience12">12年</span>
                            </div>
                            <div class="progress-bar-bg"><div class="progress-bar-fill" data-skill-level="85"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-center mb-1">
                                <span class="skill-card-item">PHP:</span>
                                <span class="progress-bar-label" data-translate="skillsExperience12">12年</span>
                            </div>
                            <div class="progress-bar-bg"><div class="progress-bar-fill" data-skill-level="80"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-center mb-1">
                                <span class="skill-card-item">C#:</span>
                                <span class="progress-bar-label" data-translate="skillsExperience1">1年</span>
                            </div>
                            <div class="progress-bar-bg"><div class="progress-bar-fill" data-skill-level="40"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-center mb-1">
                                <span class="skill-card-item">COBOL:</span>
                                <span class="progress-bar-label" data-translate="skillsExperience1">1年</span>
                            </div>
                            <div class="progress-bar-bg"><div class="progress-bar-fill" data-skill-level="35"></div></div>
                        </li>
                    </ul>
                </div>
                <div class="card p-6">
                    <h3 class="text-xl font-semibold mb-4 text-sky-600 flex items-center"><i data-lucide="database" class="mr-2"></i><span data-translate="skillsDatabases">データベース</span></h3>
                    <ul class="space-y-4">
                        <li>
                            <div class="flex justify-between items-center mb-1">
                                <span class="skill-card-item">Oracle:</span>
                                <span class="progress-bar-label" data-translate="skillsExperience12">12年</span>
                            </div>
                            <div class="progress-bar-bg"><div class="progress-bar-fill" data-skill-level="95"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-center mb-1">
                                <span class="skill-card-item">PostgreSQL:</span>
                                <span class="progress-bar-label" data-translate="skillsExperience3">3年</span>
                            </div>
                            <div class="progress-bar-bg"><div class="progress-bar-fill" data-skill-level="65"></div></div>
                        </li>
                    </ul>
                </div>
                 <div class="card p-6 lg:col-span-3">
                    <h3 class="text-xl font-semibold mb-4 text-sky-600 flex items-center"><i data-lucide="star" class="mr-2"></i><span data-translate="strengthsTitle">強み・アピールポイント</span></h3>
                    <ul class="space-y-3">
                        <li class="skill-card-item" data-translate="strength1"><i data-lucide="users" class="w-5 h-5 mr-2 text-sky-500"></i>大規模プロジェクト（最大700名規模）での開発・運用経験</li>
                        <li class="skill-card-item" data-translate="strength2"><i data-lucide="user-check" class="w-5 h-5 mr-2 text-sky-500"></i>チームリーダーとしてのマネジメント経験（メンバー指導、進捗管理、環境構築）</li>
                        <li class="skill-card-item" data-translate="strength3"><i data-lucide="layers" class="w-5 h-5 mr-2 text-sky-500"></i>要件定義から設計、開発、テスト、運用保守までの一貫したシステム開発経験</li>
                        <li class="skill-card-item" data-translate="strength4"><i data-lucide="brain" class="w-5 h-5 mr-2 text-sky-500"></i>積極的な業務知識の習得と、それに基づく改善提案力</li>
                        <li class="skill-card-item" data-translate="strength5"><i data-lucide="message-circle" class="w-5 h-5 mr-2 text-sky-500"></i>高いコミュニケーション能力と問題解決能力</li>
                        <li class="skill-card-item" data-translate="strength6"><i data-lucide="zap" class="w-5 h-5 mr-2 text-sky-500"></i>新しい技術や環境への適応力</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section id="projects" class="py-16 sm:py-20 bg-white fade-in-section">
        <div class="container mx-auto px-4">
            <h2 class="section-title" data-translate="projectsTitle">プロジェクト実績</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="card">
                    <img src="32148164_s.jpg" alt="国家業務案件イメージ" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-2xl font-semibold mb-2" data-translate="project1Title">国家業務案件</h3>
                        <p class="text-sky-600 font-medium mb-3" data-translate="project1Role">役割: メンバー ⇒ チームリーダー</p>
                        <p class="text-gray-600 mb-4 text-sm" data-translate="project1DescShort">国家業務案件のシステム開発。詳細設計から運用保守まで担当し、後にチームリーダーとして機能改善や制度改正対応を牽引。</p>
                        <button class="project-details-button project-modal-trigger" data-project-id="project1" data-translate="viewDetails">詳細を見る</button>
                    </div>
                </div>
                <div class="card">
                     <img src="25068116_s.jpg" alt="ホームセンターシステムイメージ" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-2xl font-semibold mb-2" data-translate="project2Title">ホームセンター業務運用システム開発</h3>
                        <p class="text-sky-600 font-medium mb-3" data-translate="project2Role">役割: チームリーダー</p>
                        <p class="text-gray-600 mb-4 text-sm" data-translate="project2DescShort">ホームセンター向け業務システムの開発。チームリーダーとしてメンバー管理と開発作業を兼務し、円滑なプロジェクト遂行に貢献。</p>
                        <button class="project-details-button project-modal-trigger" data-project-id="project2" data-translate="viewDetails">詳細を見る</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="py-16 sm:py-20 bg-gray-800 text-white fade-in-section">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold mb-6" data-translate="contactTitle">お問い合わせ</h2>
            <p class="text-lg mb-6" data-translate="contactIntro">ご興味をお持ちいただけましたら、下記のメールアドレスよりお気軽にご連絡ください。</p>
            <div class="mb-6">
                <a href="mailto:u.tomo0730@gmail.com" class="inline-flex items-center justify-center bg-sky-500 text-white font-semibold px-8 py-3 rounded-lg shadow-md transition-colors duration-200 ease-in-out text-lg"> <i data-lucide="mail" class="mr-2"></i> <span data-translate="contactButtonText">連絡はこちら</span>
                </a>
            </div>
            </div>
    </section>

    <footer class="bg-gray-900 text-gray-400 text-center p-6">
        <p>&copy; <span id="currentYear"></span> <span data-translate="footerName">sakazaki_tu</span>. All Rights Reserved.</p>
    </footer>

    <div id="project-modal"> <div class="modal-content"> <button id="close-modal-btn" class="absolute top-3 right-3 sm:top-4 sm:right-4 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-3xl leading-none z-10">&times;</button>
            <div id="modal-body" class="prose dark:prose-invert pt-8 sm:pt-4"> </div>
        </div>
    </div>

    <div id="achievement-toast" class="achievement-toast">
        <div class="flex items-center">
            <i id="achievement-icon" data-lucide="award" class="achievement-toast-icon"></i>
            <div>
                <p id="achievement-title" class="font-semibold"></p>
                <p id="achievement-message" class="text-sm"></p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log("LP.html: DOM fully loaded and parsed");

            if (typeof lucide !== 'undefined') {
                try {
                    lucide.createIcons();
                    console.log("LP.html: Lucide icons created on DOMContentLoaded.");
                } catch (e) {
                    console.error("LP.html: Error creating Lucide icons:", e);
                }
            } else {
                console.error("LP.html: Lucide library not loaded at DOMContentLoaded.");
            }

            // --- Roguelike Map Animation ---
            const heroCanvas = document.getElementById('hero-canvas');
            if (heroCanvas) {
                const ctx = heroCanvas.getContext('2d');
                let width, height;
                const cellSize = 20;
                let grid = [];
                let walkers = [];
                const numWalkers = 7;
                const walkSteps = 250;
                const roomAttempts = 60;
                const minRoomSize = 2;
                const maxRoomSize = 5;
                let animationFrameId_roguelike;
                let generationComplete = false;

                function initializeRoguelike() {
                    console.log("LP.html (Roguelike Debug): Initializing Roguelike map...");
                    if (!heroCanvas) { console.error("LP.html (Roguelike Debug): Canvas not found in initializeRoguelike"); return; }
                    width = heroCanvas.offsetWidth;
                    height = heroCanvas.offsetHeight;
                    if (width === 0 || height === 0) {
                        console.warn("LP.html (Roguelike Debug): Canvas width or height is 0. Retrying init shortly.");
                        setTimeout(initializeRoguelike, 100);
                        return;
                    }
                    heroCanvas.width = width;
                    heroCanvas.height = height;

                    const cols = Math.floor(width / cellSize);
                    const rows = Math.floor(height / cellSize);
                    console.log(`LP.html (Roguelike Debug): Canvas dimensions: ${width}x${height}, Grid: ${cols}x${rows}`);
                    if (cols <=0 || rows <=0) {
                        console.error("LP.html (Roguelike Debug): Calculated cols or rows is zero or negative. Aborting animation init.");
                        return;
                    }

                    grid = Array(rows).fill(null).map(() => Array(cols).fill(0));
                    walkers = [];
                    for (let i = 0; i < numWalkers; i++) {
                        walkers.push({
                            x: Math.floor(cols / 2) + Math.floor(Math.random() * (cols / 4) - (cols / 8)),
                            y: Math.floor(rows / 2) + Math.floor(Math.random() * (rows / 4) - (rows / 8)),
                            steps: 0
                        });
                    }
                    generationComplete = false;
                    if (animationFrameId_roguelike) cancelAnimationFrame(animationFrameId_roguelike);
                    console.log("LP.html (Roguelike Debug): Initialization complete. Starting loop.");
                    roguelikeLoop();
                }

                function drawGrid() {
                    if (!ctx || !heroCanvas) return;
                    ctx.fillStyle = getComputedStyle(heroCanvas).backgroundColor || '#0A0F1A';
                    ctx.fillRect(0, 0, width, height);
                    if (!grid || grid.length === 0) return;

                    for (let r = 0; r < grid.length; r++) {
                        if (!grid[r]) continue;
                        for (let c = 0; c < grid[r].length; c++) {
                            if (grid[r][c] === 1) {
                                ctx.fillStyle = 'rgba(0, 120, 255, 0.5)';
                                ctx.fillRect(c * cellSize, r * cellSize, cellSize -1 , cellSize -1 );
                            } else if (grid[r][c] === 2) {
                                ctx.fillStyle = 'rgba(0, 80, 180, 0.6)';
                                ctx.fillRect(c * cellSize, r * cellSize, cellSize -1, cellSize -1);
                            }
                        }
                    }
                }

                function stepWalkers() {
                    let activeWalkers = 0;
                    if (!grid || !grid[0]) return false;

                    walkers.forEach(walker => {
                        if (walker.steps < walkSteps) {
                            activeWalkers++;
                            const { x, y } = walker;
                            if (x >= 0 && x < grid[0].length && y >= 0 && y < grid.length) {
                                grid[y][x] = 1;
                            }
                            const direction = Math.floor(Math.random() * 4);
                            if (direction === 0 && walker.y > 0) walker.y--;
                            else if (direction === 1 && walker.y < grid.length - 1) walker.y++;
                            else if (direction === 2 && walker.x > 0) walker.x--;
                            else if (direction === 3 && walker.x < grid[0].length - 1) walker.x++;
                            walker.steps++;
                        }
                    });
                    return activeWalkers > 0;
                }

                function generateRooms() {
                    if (!grid.length || !grid[0] || !grid[0].length) return;

                    for (let i = 0; i < roomAttempts; i++) {
                        const roomWidth = Math.floor(Math.random() * (maxRoomSize - minRoomSize + 1)) + minRoomSize;
                        const roomHeight = Math.floor(Math.random() * (maxRoomSize - minRoomSize + 1)) + minRoomSize;
                        if (grid.length - roomHeight <=0 || grid[0].length - roomWidth <=0) continue;

                        const r = Math.floor(Math.random() * (grid.length - roomHeight));
                        const c = Math.floor(Math.random() * (grid[0].length - roomWidth));

                        let canPlace = true;
                        for (let y = r; y < r + roomHeight; y++) {
                            for (let x = c; x < c + roomWidth; x++) {
                                if (y >= grid.length || x >= grid[0].length || grid[y][x] !== 0) {
                                    canPlace = false; break;
                                }
                            }
                            if (!canPlace) break;
                        }
                        if (canPlace) {
                            for (let y = r; y < r + roomHeight; y++) {
                                for (let x = c; x < c + roomWidth; x++) {
                                    grid[y][x] = 2;
                                }
                            }
                        }
                    }
                }

                let lastFrameTime = 0;
                const frameInterval = 1000 / 15; // Target FPS for generation animation

                function roguelikeLoop(currentTime) {
                    animationFrameId_roguelike = requestAnimationFrame(roguelikeLoop);
                    if (!width || !height) { // Ensure canvas is sized
                        console.log("LP.html (Roguelike Debug): Canvas not sized in loop, skipping frame.");
                        return;
                    }
                    if (currentTime - lastFrameTime < frameInterval) {
                        return;
                    }
                    lastFrameTime = currentTime;

                    if (!generationComplete) {
                        if (!stepWalkers()) { // if no more active walkers
                             if (walkers.every(w => w.steps >= walkSteps)) { // and all walkers finished
                                generateRooms();
                                generationComplete = true; // Stop further generation after one full pass
                                console.log("LP.html (Roguelike Debug): Map generation complete.");
                             }
                        }
                    }
                    drawGrid();
                }

                let resizeTimeoutRoguelike;
                window.addEventListener('resize', function() {
                    clearTimeout(resizeTimeoutRoguelike);
                    if (animationFrameId_roguelike) cancelAnimationFrame(animationFrameId_roguelike);
                    resizeTimeoutRoguelike = setTimeout(() => {
                        console.log("LP.html (Roguelike Debug): Resizing canvas and re-initializing map.");
                        initializeRoguelike(); // Re-initialize to adapt to new size
                    }, 250);
                });
                setTimeout(initializeRoguelike, 150); // Initial call after a short delay
            } else {
                console.error("LP.html: Hero canvas element for Roguelike animation not found.");
            }


            // --- Theme (Dark/Light Mode) ---
            const themeToggleBtn = document.getElementById('theme-toggle-btn');
            const themeToggleBtnMobile = document.getElementById('theme-toggle-btn-mobile');
            const htmlElement = document.documentElement;

            const applyTheme = (theme) => {
                if (theme === 'dark') htmlElement.classList.add('dark');
                else htmlElement.classList.remove('dark');
                if (typeof lucide !== 'undefined') { try { lucide.createIcons(); } catch (e) { console.error("LP.html: Error creating Lucide icons on theme change:", e); }}
            };

            const storedTheme = localStorage.getItem('theme');
            const preferredTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            const initialTheme = storedTheme || preferredTheme;
            applyTheme(initialTheme);

            const themeToggleHandler = () => {
                const newTheme = htmlElement.classList.contains('dark') ? 'light' : 'dark';
                applyTheme(newTheme);
                localStorage.setItem('theme', newTheme);
            };

            if (themeToggleBtn) themeToggleBtn.addEventListener('click', themeToggleHandler);
            if (themeToggleBtnMobile) themeToggleBtnMobile.addEventListener('click', themeToggleHandler);


            const translations = {
                ja: {
                    metaDescription: "sakazaki_tuのポートフォリオサイト。これまでのプロジェクト実績やスキルを紹介しています。",
                    portfolioTitle: "sakazaki_tuのポートフォリオ",
                    navHome: "ホーム",navAbout: "自己紹介",navCareer: "キャリア",navVision: "ビジョン",navSkills: "スキル",navProjects: "実績",navContact: "連絡先",
                    heroTitle: "sakazaki_tuのエンジニアポートフォリオ", heroSubtitle: "フルスタック開発者として10年以上走った軌跡", heroCta: "プロジェクトを見る",
                    aboutTitle: "自己紹介", aboutIntro: "はじめまして。sakazaki_tuです。2013年よりSES会社にて、主に国家業務案件やホームセンター業務のシステム開発・運用保守に携わってまいりました。詳細設計からテスト、運用保守、さらにはチームリーダーとしてメンバーのマネジメントまで、幅広い経験を積んでおります。常に新しい技術や知識を積極的に取り入れ、チーム全体のパフォーマンス向上とプロジェクトの成功に貢献することに情熱を燃やしています。",
                    careerTitle: "キャリアジャーニー", career1Date: "2013年04月", career1Title: "SES会社 入社", career1Desc: "正社員としてキャリアをスタート。",
                    career2Date: "2015年03月", career2Title: "国家業務案件 プロジェクト参画", career2Desc: "詳細設計工程からメンバーとして参画。バッチ機能開発、テスト、障害対応を担当。",
                    career3Date: "2019年04月", career3Title: "チームリーダー就任 (国家業務案件)", career3Desc: "運用保守、機能改善、制度改正対応などで開発チームリーダーを担当。環境準備、メンバー指導、進捗管理等を実施。",
                    career4Date: "2024年03月", career4Title: "ホームセンター業務運用システム開発 プロジェクト参画", career4Desc: "チームリーダーとして参画。メンバーマネジメントと開発作業を兼務。",
                    visionTitle: "今後のビジョン", visionText1: "これまでのシステム開発とチームリーダーとしての経験を基盤に、より大規模で社会貢献性の高いプロジェクトに挑戦していきたいと考えています。特に、クラウドネイティブなアーキテクチャ設計や、AI・機械学習技術を活用した新しい価値創造に強い関心を持っています。", visionText2: "技術的な専門性を深めるとともに、プロジェクト全体を俯瞰し、ビジネスゴール達成に貢献できるアーキテクトまたはプロダクトマネージャーとしてのキャリアパスも視野に入れています。変化の速いIT業界において、常に学び続け、新しい技術や方法論を柔軟に取り入れながら、チームと共に成長していける環境を求めています。",
                    skillsTitle: "スキルセット", skillsOs: "OS", skillsLanguages: "言語", skillsDatabases: "データベース", skillsExperienceLevel: "業務経験あり", skillsExperience12: "12年", skillsExperience3: "3年", skillsExperience1: "1年",
                    strengthsTitle: "強み・アピールポイント", strength1: "大規模プロジェクト（最大700名規模）での開発・運用経験", strength2: "チームリーダーとしてのマネジメント経験（メンバー指導、進捗管理、環境構築）", strength3: "要件定義から設計、開発、テスト、運用保守までの一貫したシステム開発経験", strength4: "積極的な業務知識の習得と、それに基づく改善提案力", strength5: "高いコミュニケーション能力と問題解決能力", strength6: "新しい技術や環境への適応力",
                    projectsTitle: "プロジェクト実績", project1Title: "国家業務案件", project1Role: "役割: メンバー ⇒ チームリーダー", project1DescShort: "国家業務案件のシステム開発。詳細設計から運用保守まで担当し、後にチームリーダーとして機能改善や制度改正対応を牽引。",
                    project1DescFull: `<h3 class="text-2xl font-bold mb-4 tech-details-heading">国家業務案件</h3><p class="mb-2"><strong>期間:</strong> [2015年03月] - [2024年02月]</p><p class="mb-2"><strong>役割:</strong> メンバー ⇒ チームリーダー</p><p class="mb-2"><strong>担当業務:</strong> 基本設計、詳細設計、開発、単体テスト、結合テスト、システムテスト、運用保守 (ヘルプデスク)</p><p class="mb-4"><strong>プロジェクト概要:</strong> 国家業務案件のシステム開発プロジェクト。所属チームだけでも最大35名、プロジェクト全体で約700名が参画した大規模案件です。</p><h4 class="text-lg font-semibold mt-4 mb-2 tech-details-heading">実績・取り組み:</h4><ul class="list-disc list-inside mb-4 space-y-1"><li>詳細設計工程から参画し、主にバッチ機能の開発を担当。</li><li>結合テスト、総合テストではバッチ及び画面機能のテスト実施、障害対応。</li><li>高い作業品質と積極的な業務知識習得が評価され、運用保守フェーズにも参画。</li><li>システム稼働後の機能改善、制度改正対応、マイナンバー対応等の新規案件で開発チームリーダーを担当。</li><li>リーダーとして、開発環境準備、メンバーへの技術指導、作業しやすい環境作り、進捗管理、レビュー等を推進。</li></ul><h4 class="text-lg font-semibold mt-4 mb-2 tech-details-heading">使用技術:</h4><p class="tech-details-text"><strong>Java, PL/SQL, Oracle, HTML/CSS, PHP</strong></p>`,
                    project2Title: "ホームセンター業務運用システム開発", project2Role: "役割: チームリーダー", project2DescShort: "ホームセンター向け業務システムの開発。チームリーダーとしてメンバー管理と開発作業を兼務し、円滑なプロジェクト遂行に貢献。",
                    project2DescFull: `<h3 class="text-2xl font-bold mb-4 tech-details-heading">ホームセンター業務運用システム開発</h3><p class="mb-2"><strong>期間:</strong> [2024年03月] - [現在]</p><p class="mb-2"><strong>役割:</strong> チームリーダー</p><p class="mb-2"><strong>担当業務:</strong> 詳細設計、開発、単体テスト、結合テスト、システムテスト</p><p class="mb-4"><strong>プロジェクト概要:</strong> メンバー5名で参画したホームセンターの業務運用システム開発プロジェクト。</p><h4 class="text-lg font-semibold mt-4 mb-2 tech-details-heading">実績・取り組み:</h4><ul class="list-disc list-inside mb-4 space-y-1"><li>チームリーダーとしてメンバーのマネジメント業務（疑問・不安点のヒアリング、解消に向けたアクション）を行いつつ、自身も開発作業に従事。</li><li>メンバーが作業しやすい環境を整備し、プロジェクトの円滑な進行に貢献。</li></ul><h4 class="text-lg font-semibold mt-4 mb-2 tech-details-heading">使用技術:</h4><p class="tech-details-text"><strong>Java, PL/SQL, PostgreSQL, HTML/CSS, JavaScript (jQuery)</strong></p>`,
                    viewDetails: "詳細を見る", contactTitle: "お問い合わせ", contactIntro: "ご興味をお持ちいただけましたら、下記のメールアドレスよりお気軽にご連絡ください。", contactButtonText: "連絡はこちら", contactOr: "または", footerName: "sakazaki_tu",
                    achievementExplorerTitle: "探検家バッジ獲得！", achievementExplorerMessage: "ポートフォリオの隅々までご覧いただきありがとうございます！",
                    achievementProjectMasterTitle: "プロジェクトマスター獲得！", achievementProjectMasterMessage: "全てのプロジェクト詳細をご覧いただき、素晴らしい探求心です！"
                },
                en: {
                    metaDescription: "sakazaki_tu's Portfolio Site. Introducing past project achievements and skills.",
                    portfolioTitle: "sakazaki_tu's Portfolio",
                    navHome: "Home",navAbout: "About",navCareer: "Career",navVision: "Vision",navSkills: "Skills",navProjects: "Projects",navContact: "Contact",
                    heroTitle: "sakazaki_tu's Engineer Portfolio", heroSubtitle: "A Trail of Over 10 Years as a Full-Stack Developer", heroCta: "View Projects",
                    aboutTitle: "About Me", aboutIntro: "Hello, I'm sakazaki_tu. Since 2013, I've been with an SES Company, primarily involved in developing and maintaining systems for national government projects and home improvement center operations. I have extensive experience ranging from detailed design to testing, operational maintenance, and team leadership, including member management. I am passionate about actively incorporating new technologies and knowledge to enhance overall team performance and contribute to project success.",
                    careerTitle: "Career Journey", career1Date: "April 2013", career1Title: "Joined SES Company", career1Desc: "Started career as a full-time employee.",
                    career2Date: "Oct 2013 (Example)", career2Title: "National Government Project Participation", career2Desc: "Participated as a member from the detailed design phase. Handled batch function development, testing, and issue resolution.",
                    career3Date: "Apr 201X (Example)", career3Title: "Promoted to Team Leader (National Government Project)", career3Desc: "Led development team for operational maintenance, functional enhancements, and responses to system reforms. Managed environment setup, member guidance, and progress.",
                    career4Date: "Jan 20XX (Example)", career4Title: "Joined Home Center Operations System Development Project", career4Desc: "Participated as Team Leader, concurrently managing members and performing development tasks.",
                    visionTitle: "Future Vision", visionText1: "Building on my experience in system development and team leadership, I aspire to take on larger-scale projects with high social contribution. I am particularly interested in cloud-native architecture design and creating new value using AI/machine learning technologies.", visionText2: "While deepening my technical expertise, I also envision a career path as an architect or product manager who can oversee entire projects and contribute to achieving business goals. In the fast-paced IT industry, I seek an environment where I can continuously learn, flexibly adopt new technologies and methodologies, and grow together with the team.",
                    skillsTitle: "Skill Set", skillsOs: "OS", skillsLanguages: "Languages", skillsDatabases: "Databases", skillsExperienceLevel: "Business Experience", skillsExperience12: "12 years", skillsExperience3: "3 years", skillsExperience1: "1 year",
                    strengthsTitle: "Strengths & Highlights", strength1: "Experience in large-scale projects (up to 700 members).", strength2: "Management experience as a team leader (member guidance, progress management, environment setup).", strength3: "Comprehensive system development experience from requirement definition to design, development, testing, and operational maintenance.", strength4: "Proactive acquisition of business knowledge and ability to propose improvements based on it.", strength5: "Strong communication and problem-solving skills.", strength6: "Adaptability to new technologies and environments.",
                    projectsTitle: "Project Experience", project1Title: "National Government Project", project1Role: "Role: Member ⇒ Team Leader", project1DescShort: "Development of a national government project system. Handled tasks from detailed design to operational maintenance, later leading functional improvements and responses to regulatory changes as a team leader.",
                    project1DescFull: `<h3 class="text-2xl font-bold mb-4 tech-details-heading">National Government Project</h3><p class="mb-2"><strong>Period:</strong> [e.g., Oct 2013] - [Present or End Date]</p><p class="mb-2"><strong>Role:</strong> Member ⇒ Team Leader</p><p class="mb-2"><strong>Responsibilities:</strong> Basic Design, Detailed Design, Development, Unit Testing, Integration Testing, System Testing, Operation & Maintenance (Help Desk)</p><p class="mb-4"><strong>Project Overview:</strong> A large-scale national government project, involving up to 35 members in my team and nearly 700 members project-wide.</p><h4 class="text-lg font-semibold mt-4 mb-2 tech-details-heading">Achievements & Initiatives:</h4><ul class="list-disc list-inside mb-4 space-y-1"><li>Joined from the detailed design phase, primarily responsible for batch function development.</li><li>Conducted testing and defect resolution for both batch and screen functions during integration and system testing.</li><li>Recognized for high-quality work and proactive learning of business knowledge, leading to continued involvement in the operational maintenance phase.</li><li>Appointed as a development team leader for new initiatives such as post-launch functional enhancements, responses to system reforms, and My Number system integration.</li><li>As a leader, prepared development environments, mentored team members on development practices, fostered a productive work environment, managed progress, and conducted reviews.</li></ul><h4 class="text-lg font-semibold mt-4 mb-2 tech-details-heading">Technologies Used:</h4><p class="tech-details-text"><strong>Java, PL/SQL, Oracle, HTML/CSS, PHP</strong></p>`,
                    project2Title: "Home Center Operations System Dev", project2Role: "Role: Team Leader", project2DescShort: "Development of an operational system for a home improvement center. Contributed to smooth project execution by managing team members and participating in development tasks as a team leader.",
                    project2DescFull: `<h3 class="text-2xl font-bold mb-4 tech-details-heading">Home Improvement Center Operations System Development</h3><p class="mb-2"><strong>Period:</strong> [e.g., Jan 20XX] - [End Date]</p><p class="mb-2"><strong>Role:</strong> Team Leader</p><p class="mb-2"><strong>Responsibilities:</strong> Detailed Design, Development, Unit Testing, Integration Testing, System Testing</p><p class="mb-4"><strong>Project Overview:</strong> Development project for a home improvement center's operational system, with a team of 5 members including myself.</p><h4 class="text-lg font-semibold mt-4 mb-2 tech-details-heading">Achievements & Initiatives:</h4><ul class="list-disc list-inside mb-4 space-y-1"><li>As team leader, managed team members (e.g., addressing questions/concerns, taking action to resolve issues) while also engaging in development work.</li><li>Fostered a productive work environment for team members, contributing to the smooth progress of the project.</li></ul><h4 class="text-lg font-semibold mt-4 mb-2 tech-details-heading">Technologies Used:</h4><p class="tech-details-text"><strong>Java, PL/SQL, PostgreSQL, HTML/CSS, JavaScript (jQuery)</strong></p>`,
                    viewDetails: "View Details", contactTitle: "Contact Me", contactIntro: "Feel free to reach out via the email address below.", contactButtonText: "Contact Here", contactOr: "or", footerName: "sakazaki_tu",
                    achievementExplorerTitle: "Explorer Badge Unlocked!", achievementExplorerMessage: "Thanks for exploring the entire portfolio!",
                    achievementProjectMasterTitle: "Project Master Unlocked!", achievementProjectMasterMessage: "You've viewed all project details. Great curiosity!"
                }
            };


            let currentLang = 'ja';
            const langJaBtnDesktop = document.getElementById('lang-ja');
            const langEnBtnDesktop = document.getElementById('lang-en');
            const langJaBtnMobile = document.getElementById('lang-ja-mobile');
            const langEnBtnMobile = document.getElementById('lang-en-mobile');

            const translatableElements = document.querySelectorAll('[data-translate]');
            const metaDescriptionTag = document.querySelector('meta[name="description"]');

            function setLanguage(lang) {
                console.log(`LP.html: Setting language to: ${lang}`);
                currentLang = lang;
                translatableElements.forEach(el => {
                    const key = el.dataset.translate;
                    if (translations[lang] && translations[lang][key]) {
                        el.innerHTML = translations[lang][key];
                    } else {
                        if (lang === 'en' && translations.ja[key]) {
                             console.warn(`LP.html: Translation key "${key}" not found for language "${lang}", falling back to 'ja'. Element:`, el);
                            el.innerHTML = translations.ja[key];
                        } else if (lang === 'ja' && translations.en[key]) {
                            console.warn(`LP.html: Translation key "${key}" not found for language "${lang}", falling back to 'en'. Element:`, el);
                            el.innerHTML = translations.en[key];
                        } else {
                            console.warn(`LP.html: Translation key "${key}" not found for language "${lang}" and no fallback. Element:`, el);
                        }
                    }
                });
                if (metaDescriptionTag && translations[lang] && translations[lang].metaDescription) {
                    metaDescriptionTag.setAttribute('content', translations[lang].metaDescription);
                }
                if (htmlElement) document.documentElement.lang = lang;

                if (langJaBtnDesktop) langJaBtnDesktop.classList.toggle('active', lang === 'ja');
                if (langEnBtnDesktop) langEnBtnDesktop.classList.toggle('active', lang === 'en');
                if (langJaBtnMobile) langJaBtnMobile.classList.toggle('active', lang === 'ja');
                if (langEnBtnMobile) langEnBtnMobile.classList.toggle('active', lang === 'en');


                if (document.getElementById('hero-subtitle-text')) initializeTypingAnimation();

                const projectModalEl = document.getElementById('project-modal');
                if (projectModalEl && projectModalEl.style.display === 'flex') {
                    const openProjectId = projectModalEl.dataset.currentProject;
                    if (openProjectId) openProjectModal(openProjectId);
                }
                animateProgressBars();
                if (typeof lucide !== 'undefined') { try { lucide.createIcons(); } catch (e) { console.error("LP.html: Error creating Lucide icons on setLanguage:", e); }}
            }

            if (langJaBtnDesktop && langEnBtnDesktop) {
                langJaBtnDesktop.addEventListener('click', () => setLanguage('ja'));
                langEnBtnDesktop.addEventListener('click', () => setLanguage('en'));
            }
             if (langJaBtnMobile && langEnBtnMobile) {
                langJaBtnMobile.addEventListener('click', () => setLanguage('ja'));
                langEnBtnMobile.addEventListener('click', () => setLanguage('en'));
            }


            const projectModal = document.getElementById('project-modal');
            const modalBody = document.getElementById('modal-body');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const projectModalTriggers = document.querySelectorAll('.project-modal-trigger');
            let viewedProjects = new Set(JSON.parse(localStorage.getItem('viewedProjects_portfolio_lp')) || []);
            const totalProjects = projectModalTriggers.length;

            function openProjectModal(projectId) {
                console.log(`LP.html: Opening modal for ${projectId}`);
                if (!projectModal || !modalBody) { console.error("LP.html: Modal or body not found."); return; }

                const projectDataKey = `${projectId}DescFull`;
                if (translations[currentLang] && translations[currentLang][projectDataKey]) {
                    modalBody.innerHTML = translations[currentLang][projectDataKey];
                } else {
                    modalBody.innerHTML = `<p>Details for ${projectId} not found in ${currentLang}.</p>`;
                }
                projectModal.style.display = 'flex';
                void projectModal.offsetHeight;
                projectModal.style.opacity = '1';
                console.log(`LP.html: Modal for ${projectId} display set to flex, opacity to 1.`);
                projectModal.dataset.currentProject = projectId;

                if (!viewedProjects.has(projectId)) {
                    viewedProjects.add(projectId);
                    localStorage.setItem('viewedProjects_portfolio_lp', JSON.stringify(Array.from(viewedProjects)));
                    if (viewedProjects.size === totalProjects && totalProjects > 0) showAchievement('projectMaster');
                }
                if (typeof lucide !== 'undefined') { try { lucide.createIcons(); } catch (e) { console.error("LP.html: Error creating Lucide icons in openProjectModal:", e); }}
            }

            projectModalTriggers.forEach(trigger => {
                trigger.addEventListener('click', (e) => {
                    e.preventDefault();
                    openProjectModal(trigger.dataset.projectId);
                });
            });

            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', () => {
                    if (projectModal) {
                        projectModal.style.opacity = '0';
                        setTimeout(() => {
                            projectModal.style.display = 'none';
                            projectModal.dataset.currentProject = '';
                        }, 300);
                    }
                });
            }
            if (projectModal) {
                projectModal.addEventListener('click', (event) => {
                    if (event.target === projectModal) {
                        projectModal.style.opacity = '0';
                        setTimeout(() => {
                            projectModal.style.display = 'none';
                            projectModal.dataset.currentProject = '';
                        }, 300);
                    }
                });
            }

            const currentYearEl = document.getElementById('currentYear');
            if (currentYearEl) currentYearEl.textContent = new Date().getFullYear();

            const sectionsToObserve = document.querySelectorAll('.fade-in-section');
            const progressBarsNodeList = document.querySelectorAll('.progress-bar-fill');

            function animateProgressBars() {
                const skillsSection = document.getElementById('skills');
                if (skillsSection && skillsSection.classList.contains('is-visible')) {
                    console.log("LP.html: Skills section visible, animating progress bars.");
                    progressBarsNodeList.forEach((bar) => {
                        const level = bar.dataset.skillLevel;
                        if (level) bar.style.width = level + '%';
                        else console.warn("LP.html: Progress bar missing data-skill-level", bar);
                    });
                } else {
                    console.log("LP.html: Skills section not visible, resetting progress bars.");
                    progressBarsNodeList.forEach(bar => bar.style.width = '0%');
                }
            }

            const sectionObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        if (entry.target.id === 'skills') animateProgressBars();
                        if (entry.target.id === 'contact' && entry.intersectionRatio >= 0.8) showAchievement('explorer');
                    }
                });
            }, { threshold: [0.1, 0.8] });
            sectionsToObserve.forEach(section => sectionObserver.observe(section));

            const heroSubtitleTextElement = document.getElementById('hero-subtitle-text');
            let typingTimeout;
            function typeChar(text, index) {
                if (heroSubtitleTextElement && index < text.length) {
                    heroSubtitleTextElement.textContent = text.substring(0, index + 1);
                    typingTimeout = setTimeout(() => typeChar(text, index + 1), 80);
                }
            }
            function initializeTypingAnimation() {
                if (heroSubtitleTextElement) {
                    clearTimeout(typingTimeout);
                    heroSubtitleTextElement.textContent = '';
                    const subtitleKey = heroSubtitleTextElement.dataset.translate;
                    if (translations[currentLang] && translations[currentLang][subtitleKey]) {
                        typeChar(translations[currentLang][subtitleKey], 0);
                    }
                }
            }

            const achievementToast = document.getElementById('achievement-toast');
            const achievementTitleEl = document.getElementById('achievement-title');
            const achievementMessageEl = document.getElementById('achievement-message');
            const achievementIconEl = document.getElementById('achievement-icon');
            let unlockedAchievements = new Set(JSON.parse(localStorage.getItem('unlockedAchievements_portfolio_lp')) || []);

            function showAchievement(type) {
                if (unlockedAchievements.has(type)) return;
                let titleKey, messageKey, iconName;
                if (type === 'explorer') { titleKey = 'achievementExplorerTitle'; messageKey = 'achievementExplorerMessage'; iconName = 'compass'; }
                else if (type === 'projectMaster') { titleKey = 'achievementProjectMasterTitle'; messageKey = 'achievementProjectMasterMessage'; iconName = 'award'; }
                else return;

                if (achievementToast && achievementTitleEl && achievementMessageEl && achievementIconEl) {
                    achievementTitleEl.textContent = translations[currentLang][titleKey] || 'Achievement Unlocked!';
                    achievementMessageEl.textContent = translations[currentLang][messageKey] || 'You did something great!';
                    achievementIconEl.setAttribute('data-lucide', iconName);
                    if (typeof lucide !== 'undefined') { try { lucide.createIcons(); } catch (e) { console.error("LP.html: Error creating Lucide icons in showAchievement:", e); }}
                    achievementToast.classList.add('show');
                    unlockedAchievements.add(type);
                    localStorage.setItem('unlockedAchievements_portfolio_lp', JSON.stringify(Array.from(unlockedAchievements)));
                    setTimeout(() => achievementToast.classList.remove('show'), 5000);
                }
            }

            // Mobile Menu Toggle
            const menuToggleBtn = document.getElementById('menu-toggle-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');


            if(menuToggleBtn && mobileMenu) {
                menuToggleBtn.addEventListener('click', function() {
                    mobileMenu.classList.toggle('hidden');
                    mobileMenu.classList.toggle('open');
                    const icon = menuToggleBtn.querySelector('i[data-lucide]');
                    if (mobileMenu.classList.contains('open')) {
                        icon.setAttribute('data-lucide', 'x');
                    } else {
                        icon.setAttribute('data-lucide', 'menu');
                    }
                    if(typeof lucide !== 'undefined') lucide.createIcons();
                });

                mobileNavLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        if (mobileMenu.classList.contains('open')) {
                            mobileMenu.classList.add('hidden');
                            mobileMenu.classList.remove('open');
                            menuToggleBtn.querySelector('i[data-lucide]').setAttribute('data-lucide', 'menu');
                            if(typeof lucide !== 'undefined') lucide.createIcons();
                        }
                    });
                });
            }


            setLanguage('ja');
            setTimeout(() => { animateProgressBars(); }, 200);
        });
    </script>
</body>
</html>
